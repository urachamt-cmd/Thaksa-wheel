<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>วงล้อทักษาพยากรณ์:อุรชา</title>
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      display: flex; flex-direction: column; align-items: center;
      padding: 20px;
    }
    canvas { margin-top: 20px; border:1px solid #ccc; border-radius:50%; }
    select, button { font-size:18px; padding:5px 10px; margin-top:10px; }
  </style>
</head>
<body>
  <h1>วงล้อทักษาพยากรณ์</h1>

  <label>เลือกวันเกิด:</label>
  <select id="dayOfWeek">
    <option>อาทิตย์</option><option>จันทร์</option><option>อังคาร</option>
    <option>พุธ</option><option>พฤหัสบดี</option><option>ศุกร์</option><option>เสาร์</option>
  </select>
  <button id="spinBtn">หมุนวงล้อ</button>

  <canvas id="wheel" width="550" height="550"></canvas>

  <script>
    window.addEventListener('DOMContentLoaded', ()=>{
      const canvas = document.getElementById('wheel');
      if (!canvas.getContext) return alert('เบราว์เซอร์นี้ไม่รองรับ Canvas');
      const ctx = canvas.getContext('2d');
      const dayToColor = {
        'อาทิตย์':'แดง','จันทร์':'เหลือง','อังคาร':'ชมพู',
        'พุธ':'เขียว','พฤหัสบดี':'ส้ม','ศุกร์':'ฟ้า','เสาร์':'ม่วง'
      };
      const colorMap = {
        'แดง':'#FF0000','เหลือง':'#FFD700','ชมพู':'#FFB6C1',
        'เขียว':'#32CD32','ม่วง':'#9370DB','ส้ม':'#FF8C00',
        'ดำ':'#000000','ฟ้า':'#87CEEB'
      };
      const labels = [
        'คนรอบข้าง','สุขภาพความมั่นคง','อำนาจบารมี','ความรักเงินทอง',
        'ทรัพย์สินที่ดิน','งานอาชีพ','คนอุปถัมภ์ผู้ใหญ่','ปัญหาความยุ่งยาก'
      ];
      const baseColors = ['แดง','เหลือง','ชมพู','เขียว','ม่วง','ส้ม','ดำ','ฟ้า'];
      const sliceCount = labels.length;
      const step = 2*Math.PI/sliceCount;
      const cx=canvas.width/2, cy=canvas.height/2;
      const rInner=140;
      const rText=rInner+15;

      function rotate(arr, n){ return arr.slice(n).concat(arr.slice(0,n)); }

      function draw(){
        const day = document.getElementById('dayOfWeek').value;
        const main = dayToColor[day];
        const idx = baseColors.indexOf(main);
        const colors = rotate(baseColors, idx<0?0:idx);

        ctx.clearRect(0,0,canvas.width,canvas.height);

        // วาดพายวงใน
        for(let i=0;i<sliceCount;i++){
          const a0 = -Math.PI/2 + i*step, a1=a0+step;
          ctx.beginPath(); ctx.moveTo(cx,cy);
          ctx.fillStyle = colorMap[colors[i]];
          ctx.arc(cx,cy,rInner,a0,a1);
          ctx.fill(); ctx.closePath();
        }

        // วาดข้อความขอบวงในครึ่งทาง
        ctx.font='16px Kanit'; ctx.textBaseline='middle';
        for(let i=0;i<sliceCount;i++){
          const ang = -Math.PI/2 + i*step + step/2;
          const x = cx + rText*Math.cos(ang),
                y = cy + rText*Math.sin(ang);
          if      (Math.cos(ang)>0) ctx.textAlign='left';
          else if (Math.cos(ang)<0) ctx.textAlign='right';
          else                       ctx.textAlign='center';
          ctx.fillStyle='#000';
          ctx.fillText(labels[i], x, y);
        }

        // วงตรงกลาง
        ctx.beginPath();
        ctx.arc(cx,cy,40,0,2*Math.PI);
        ctx.fillStyle='#fff'; ctx.fill();
      }

      document.getElementById('spinBtn').addEventListener('click', draw);
      draw();
    });
  </script>
</body>
</html>
