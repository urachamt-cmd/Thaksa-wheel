<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>วงล้อทักษาพยากรณ์</title>
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    canvas {
      margin-top: 20px;
      border: 1px solid #ccc;
      border-radius: 50%;
    }
    select, button {
      font-size: 18px;
      padding: 5px 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>วงล้อทักษาพยากรณ์</h1>

  <label for="dayOfWeek">เลือกวันเกิดของคุณ:</label>
  <select id="dayOfWeek">
    <option value="อาทิตย์">อาทิตย์</option>
    <option value="จันทร์">จันทร์</option>
    <option value="อังคาร">อังคาร</option>
    <option value="พุธ">พุธ</option>
    <option value="พฤหัส">พฤหัสบดี</option>
    <option value="ศุกร์">ศุกร์</option>
    <option value="เสาร์">เสาร์</option>
  </select>
  <button id="spinBtn">หมุนวงล้อ</button>

  <canvas id="wheel" width="400" height="400"></canvas>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const canvas = document.getElementById('wheel');
      const ctx = canvas.getContext('2d');
      const daySelect = document.getElementById('dayOfWeek');
      const spinBtn = document.getElementById('spinBtn');

      // ชื่อรอบนอก (คงที่) เริ่มที่ 'คนรอบข้าง' ตำแหน่ง 12 นาฬิกา
      const labels = [
        'คนรอบข้าง',
        'สุขภาพความมั่นคง',
        'อำนาจบารมี',
        'ความรักเงินทอง',
        'ทรัพย์สินที่ดิน',
        'งานอาชีพ',
        'คนอุปถัมภ์ผู้ใหญ่',
        'ปัญหาความยุ่งยาก'
      ];

      // สีวงในเรียงตามเข็มนาฬิกา (คงที่)
      const baseColors = [
        'แดง','เหลือง','ชมพู','เขียว',
        'ม่วง','ส้ม','ดำ','ฟ้า'
      ];
      const colorMap = {
        'แดง':   '#FF0000',
        'เหลือง':'#FFD700',
        'ชมพู':  '#FFB6C1',
        'เขียว': '#32CD32',
        'ม่วง':  '#9370DB',
        'ส้ม':   '#FF8C00',
        'ดำ':    '#000000',
        'ฟ้า':   '#87CEEB'
      };

      // แม็ปวันเกิด → สี
      const dayToColor = {
        'อาทิตย์': 'แดง',
        'จันทร์':  'เหลือง',
        'อังคาร':  'ชมพู',
        'พุธ':     'เขียว',
        'พฤหัสบดี':'ส้ม',
        'ศุกร์':   'ฟ้า',
        'เสาร์':   'ม่วง'
      };

      const sliceCount = labels.length;
      const step = 2 * Math.PI / sliceCount;
      const cx = canvas.width / 2;
      const cy = canvas.height / 2;
      const radius = 150;

      // หมุน array baseColors ให้สีที่เลือกมาอยู่ตำแหน่งแรก
      function rotateColors(selectedColor) {
        const idx = baseColors.indexOf(selectedColor);
        if (idx < 0) return baseColors;
        return [
          ...baseColors.slice(idx),
          ...baseColors.slice(0, idx)
        ];
      }

      function drawWheel() {
        const day = daySelect.value;
        const mainColor = dayToColor[day];
        const colors = rotateColors(mainColor);

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // วาดวงในสี
        for (let i = 0; i < sliceCount; i++) {
          const startA = -Math.PI/2 + i * step;
          const endA   = startA + step;

          ctx.beginPath();
          ctx.moveTo(cx, cy);
          ctx.fillStyle = colorMap[colors[i]];
          ctx.arc(cx, cy, radius, startA, endA);
          ctx.closePath();
          ctx.fill();
        }

        // วาดชื่อรอบนอก คงที่
        for (let i = 0; i < sliceCount; i++) {
          const ang = -Math.PI/2 + i * step + step/2;
          const x = cx + (radius + 30) * Math.cos(ang);
          const y = cy + (radius + 30) * Math.sin(ang);

          ctx.fillStyle = '#000';
          ctx.font = '16px Kanit';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(labels[i], x, y);
        }

        // วงกลมตรงกลาง (เว้นว่าง)
        ctx.beginPath();
        ctx.arc(cx, cy, 30, 0, 2 * Math.PI);
        ctx.fillStyle = '#fff';
        ctx.fill();
      }

      // วาดครั้งแรก
      drawWheel();
      // ผูกปุ่ม
      spinBtn.addEventListener('click', drawWheel);
    });
  </script>
</body>
</html>
